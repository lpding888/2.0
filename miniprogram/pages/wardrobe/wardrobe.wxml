<!--我的衣柜页面-->
<view class="container page-slide-up">
  <!-- 页面标题 -->
  <view class="page-header">
    <text class="page-title">👔 我的衣柜</text>
    <text class="page-subtitle">管理你的服装收藏</text>
  </view>

  <!-- 空状态 -->
  <view wx:if="{{clothingList.length === 0 && !loading}}" class="empty-state">
    <image class="empty-icon" src="/images/empty-wardrobe.png" mode="aspectFit"></image>
    <text class="empty-text">衣柜空空如也</text>
    <text class="empty-hint">添加服装图片到你的专属衣柜吧</text>
    <button class="add-btn" bindtap="addClothing">
      <text class="btn-icon">➕</text>
      <text>添加服装</text>
    </button>
  </view>

  <!-- 服装列表 -->
  <view wx:else class="content-area">
    <!-- 操作栏 -->
    <view class="action-bar">
      <view class="filter-tabs">
        <view
          class="filter-tab {{currentCategory === 'all' ? 'active' : ''}}"
          bindtap="switchCategory"
          data-category="all"
        >
          全部
        </view>
        <view
          class="filter-tab {{currentCategory === 'top' ? 'active' : ''}}"
          bindtap="switchCategory"
          data-category="top"
        >
          上衣
        </view>
        <view
          class="filter-tab {{currentCategory === 'bottom' ? 'active' : ''}}"
          bindtap="switchCategory"
          data-category="bottom"
        >
          下装
        </view>
        <view
          class="filter-tab {{currentCategory === 'dress' ? 'active' : ''}}"
          bindtap="switchCategory"
          data-category="dress"
        >
          连衣裙
        </view>
        <view
          class="filter-tab {{currentCategory === 'other' ? 'active' : ''}}"
          bindtap="switchCategory"
          data-category="other"
        >
          其他
        </view>
      </view>
      <view class="add-icon" bindtap="addClothing">
        <text>➕</text>
      </view>
    </view>

    <!-- 服装网格 -->
    <view class="clothing-grid">
      <block wx:for="{{clothingList}}" wx:key="id">
        <view class="clothing-item" bindtap="viewClothing" data-item="{{item}}">
          <image class="clothing-image" src="{{item.url}}" mode="aspectFill" lazy-load="true"></image>
          <view class="clothing-info">
            <text class="clothing-name">{{item.name || '未命名'}}</text>
            <text class="clothing-category">{{categoryNames[item.category] || '其他'}}</text>
          </view>
          <view class="clothing-actions">
            <view class="action-btn" catchtap="useClothing" data-item="{{item}}">
              <text>使用</text>
            </view>
            <view class="action-btn delete" catchtap="deleteClothing" data-id="{{item.id}}">
              <text>删除</text>
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">加载中...</text>
  </view>
</view>

<!-- AI摄影师首页 - 现代化设计 -->
<view class="page-container page-fade-in">
  <!-- 移除全屏loading遮罩，改用局部loading -->
  <!-- 顶部状态栏占位 -->
  <view class="status-bar"></view>

  <!-- 头部区域 -->
  <view class="header-section">
    <view class="header-content">
      <view class="user-area" wx:if="{{userInfo}}">
        <view class="avatar-wrapper">
          <image class="user-avatar" src="{{userInfo.avatar_url || '/images/default-avatar.png'}}" mode="aspectFill" lazy-load="true"></image>
        </view>
        <view class="user-info">
          <text class="welcome-text">欢迎回来</text>
          <text class="user-name">{{userInfo.nickname || '用户'}}</text>
        </view>
      </view>

      <view class="login-area {{loading ? 'loading' : ''}}" wx:else bindtap="onLogin">
        <view class="avatar-placeholder">
          <text class="avatar-icon" wx:if="{{!loading}}">👤</text>
          <view class="loading-spinner" wx:else></view>
        </view>
        <view class="login-prompt">
          <text class="login-text">{{loading ? '登录中...' : '点击开始体验'}}</text>
          <text class="login-hint" wx:if="{{!loading}}">免费体验AI摄影</text>
        </view>
        <view class="login-arrow" wx:if="{{!loading}}">→</view>
      </view>
      
      <view class="credits-display">
        <view class="credits-card">
          <text class="credits-icon">💎</text>
          <text class="credits-number">{{userInfo.credits || 0}}</text>
          <text class="credits-label">剩余张数</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 主标题区域 -->
  <view class="title-section">
    <text class="main-title">会说话的AI摄影师</text>
    <text class="sub-title">对话即拍摄，专注服装展示艺术</text>
  </view>

  <!-- 主要功能卡片 -->
  <view class="main-features">
    <view class="feature-card primary-card card-hover" bindtap="generatePhoto" style="height: 274rpx; display: flex; box-sizing: border-box; left: 0rpx; top: 0rpx">
      <view class="card-icon">
        <text class="icon-text">📸</text>
      </view>
      <view class="card-content">
        <text class="card-title">服装拍摄</text>
        <text class="card-desc">像导演一样，用对话指挥每一个镜头</text>
      </view>
      <view class="card-arrow">→</view>
    </view>

    <view class="feature-card secondary-card card-hover" bindtap="goToFitting" style="height: 270rpx; display: flex; box-sizing: border-box; left: 0rpx; top: 0rpx">
      <view class="card-icon">
        <text class="icon-text">👗</text>
      </view>
      <view class="card-content">
        <text class="card-title">试衣展示</text>
        <text class="card-desc">看衣服穿在真人身上的效果</text>
      </view>
      <view class="card-arrow">→</view>
    </view>

    <view class="feature-card tertiary-card card-hover" bindtap="viewWorks" style="height: 270rpx; display: flex; box-sizing: border-box; left: 0rpx; top: 0rpx">
      <view class="card-icon">
        <text class="icon-text">🎨</text>
      </view>
      <view class="card-content">
        <text class="card-title">摄影作品</text>
        <text class="card-desc">查看你的服装大片集</text>
      </view>
      <view class="card-arrow">→</view>
    </view>
  </view>

  <!-- 游客体验提示 -->
  <view class="guest-experience" wx:if="{{!userInfo}}">
    <view class="experience-text">
      <text>🎯 游客可免费浏览功能演示</text>
      <text class="experience-hint">登录后可生成专属AI作品</text>
    </view>
    <button class="secondary-login-btn btn-enhanced btn-ripple" bindtap="onLogin" loading="{{loading}}">
      <text class="login-icon">🚀</text>
      <text>{{loading ? '登录中...' : '免费开始创作'}}</text>
    </button>
  </view>


  <!-- 底部装饰 -->
  <view class="bottom-decoration">
    <view class="decoration-circle circle-1"></view>
    <view class="decoration-circle circle-2"></view>
    <view class="decoration-circle circle-3"></view>
  </view>
</view>
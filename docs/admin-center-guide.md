# AI摄影师小程序 - 统一管理中心

## 功能概述

统一管理中心是AI摄影师小程序的后台管理系统，集成了AI模型、提示词模板和摄影场景的完整管理功能。

## 主要功能

### 1. AI模型管理
- ✅ 查看所有AI模型列表
- ✅ 添加新的AI模型配置
- ✅ 编辑现有模型参数
- ✅ 启用/禁用模型状态
- ✅ 删除不需要的模型
- ✅ 智能模型选择和负载均衡

### 2. 提示词管理
- ✅ 查看提示词模板库
- ✅ 创建自定义提示词模板
- ✅ 编辑现有模板内容
- ✅ 管理变量和参数
- ✅ 分类和标签管理
- ✅ 删除过时模板

### 3. 场景管理
- ✅ 查看所有摄影场景
- ✅ 添加新的拍摄场景
- ✅ 编辑场景描述和参数
- ✅ 启用/禁用场景状态
- ✅ 管理场景分类和标签
- ✅ 删除不需要的场景

## 安全特性

### 权限管理
- 🔐 管理员身份验证
- 🔐 隐藏式管理入口（连续点击头像10次）
- 🔐 后端权限验证
- 🔐 操作日志记录

### 访问控制
- 环境变量权限控制
- 数据库权限验证
- 安全的云函数调用

## 使用方法

### 1. 访问管理中心
1. 在个人中心页面连续点击头像10次
2. 系统自动验证管理员权限
3. 权限通过后跳转到管理中心

### 2. 管理AI模型
1. 切换到"AI模型"标签页
2. 点击"添加模型"按钮
3. 填写模型基本信息：
   - 模型名称（必填）
   - 模型描述（必填）
   - 模型类型（从预设列表选择）
   - API地址（必填）
   - API密钥（必填）
   - 权重和优先级（滑块设置）

### 3. 管理提示词
1. 切换到"提示词"标签页
2. 点击"添加模板"按钮
3. 填写模板信息：
   - 模板名称（必填）
   - 模板描述（必填）
   - 分类标签
   - 提示词模板内容（必填）
   - 变量列表（用逗号分隔）

### 4. 管理场景
1. 切换到"场景"标签页
2. 点击"添加场景"按钮
3. 填写场景信息：
   - 场景名称（必填）
   - 场景描述（必填）
   - 场景分类（必填）
   - 标签列表（用逗号分隔）
   - 场景图标（emoji或图片路径）

## 技术架构

### 前端组件
- **页面**: admin-center (WXML + WXSS + JS)
- **样式**: 响应式设计，支持多种设备
- **交互**: 标签页切换，弹窗表单，状态管理

### 后端云函数
- **aimodels**: AI模型管理云函数
- **prompt**: 提示词管理云函数
- **scene**: 场景管理云函数

### 数据存储
- **ai_models**: AI模型配置表
- **prompt_templates**: 提示词模板表
- **scenes**: 摄影场景表
- **admin_users**: 管理员权限表

## 配置说明

### 环境变量
```bash
# 管理员用户列表（用逗号分隔）
ADMIN_USERS=openid1,openid2,openid3

# AI模型配置
AI_MODEL_MAX_COST=1.0
AI_MODEL_TIMEOUT=30000
```

### 数据库索引
建议为以下字段创建索引以提高查询性能：
- ai_models: provider, model_type, is_active
- prompt_templates: type, category, is_active
- scenes: category, is_active, sort_order

## 扩展功能

### 批量操作
- 批量启用/禁用
- 批量删除
- 批量导入/导出

### 统计分析
- 使用频率统计
- 性能监控
- 错误日志分析

### 多租户支持
- 组织管理
- 权限分级
- 资源隔离

## 注意事项

1. **安全性**：管理中心包含敏感配置信息，请确保只有授权人员能够访问
2. **备份**：定期备份管理配置数据，防止意外丢失
3. **监控**：监控管理操作日志，及时发现异常行为
4. **更新**：定期更新AI模型配置和提示词模板，保持系统性能
5. **测试**：在生产环境中进行配置更改前，请先在测试环境验证

## 版本信息

- **当前版本**: v2.0.0
- **更新时间**: 2025-09-25
- **兼容性**: 微信小程序基础库 2.2.3+

## 技术支持

如遇到问题，请检查：
1. 管理员权限配置是否正确
2. 云函数是否正常部署
3. 数据库连接是否正常
4. API密钥是否有效
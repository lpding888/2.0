# AI摄影师管理中心使用指南

## 🔐 访问方式

### 方法一：直接访问（推荐）
1. 进入小程序"我的"页面
2. 如果您是管理员，会看到"🛠️ 管理功能"卡片
3. 点击"管理中心"按钮即可进入

### 方法二：隐藏入口
1. 进入"我的"页面
2. 快速连续点击头像15次（5秒内完成）
3. 选择"🛠️ 管理中心"

---

## 📋 功能总览

管理中心包含5个核心功能模块：

| 模块 | 功能描述 | 主要操作 |
|------|----------|----------|
| 🤖 AI模型 | 管理AI生成模型 | 增删改查、启用/禁用 |
| 💡 提示词 | 管理提示词模板 | 增删改查、分类管理 |
| 🎬 场景 | 管理摄影场景 | 增删改查、启用/禁用 |
| 👥 用户 | 管理用户账户 | 查看、搜索、启用/禁用 |
| 📊 统计 | 查看数据统计 | 实时统计、数据导出 |

---

## 🤖 AI模型管理

### 查看模型列表
- 显示所有已配置的AI模型
- 状态显示：✅ 启用 / ❌ 禁用
- 信息包括：模型名称、描述、类型、权重、优先级

### 添加新模型
1. 点击"➕ 添加模型"按钮
2. 填写模型信息：
   - **模型名称**：自定义名称（最多50字符）
   - **模型描述**：功能说明（最多200字符）
   - **模型类型**：选择（Stable Diffusion XL、DALL-E 3、Midjourney、Flux.1 Dev、Gemini）
   - **API地址**：模型服务的API地址（最多200字符）
   - **API密钥**：访问密钥（最多100字符，支持隐藏显示）
   - **权重**：负载均衡权重（1-100）
   - **优先级**：使用优先级（1-10）
3. 点击"保存"完成添加

### 编辑模型
1. 点击模型卡片的"编辑"按钮
2. 修改相应信息
3. 点击"保存"确认修改

### 启用/禁用模型
- 点击"启用"或"禁用"按钮
- 禁用的模型不会参与AI生成任务

### 删除模型
1. 点击"删除"按钮
2. 确认删除操作
3. **注意：删除后无法恢复**

---

## 💡 提示词管理

### 查看提示词模板
- 显示所有提示词模板
- 按分类显示（photography/fitting）
- 显示模板内容和变量

### 添加提示词模板
1. 点击"➕ 添加模板"按钮
2. 填写模板信息：
   - **模板名称**：描述性名称（最多50字符）
   - **模板描述**：用途说明（最多200字符）
   - **分类**：photography（摄影）或 fitting（试衣）
   - **提示词模板**：实际的提示词内容，支持变量 `{变量名}`（最多2000字符）
   - **变量列表**：用逗号分隔的变量名（如：gender,age,clothing）
3. 点击"保存"完成添加

### 模板优化建议
- 使用简洁的描述语言
- 重点突出核心要求
- 合理使用变量 `{变量名}` 提高复用性
- 避免过于复杂的描述

### 编辑/删除模板
- 编辑：点击"编辑"按钮修改内容
- 删除：点击"删除"按钮，确认后删除

---

## 🎬 场景管理

### 查看场景列表
- 显示所有摄影场景
- 状态显示：✅ 启用 / ❌ 禁用
- 显示场景分类和标签

### 添加新场景
1. 点击"➕ 添加场景"按钮
2. 填写场景信息：
   - **场景名称**：描述性名称（最多50字符）
   - **场景描述**：详细说明（最多200字符）
   - **场景分类**：分类标识（最多30字符）
   - **场景标签**：多个标签用逗号分隔（最多100字符）
   - **场景图标**：emoji或图片路径（最多50字符，默认📸）
3. 点击"保存"完成添加

### 管理场景
- **编辑**：修改场景信息
- **启用/禁用**：控制场景是否在前端显示
- **删除**：永久删除场景

---

## 👥 用户管理

### 查看用户列表
- 显示所有注册用户
- 信息包括：头像、昵称、用户ID、积分、作品数、注册时间
- 状态显示：✅ 正常 / ❌ 禁用

### 搜索用户
1. 在搜索框输入关键词
2. 支持按昵称或用户ID搜索
3. 实时搜索，500ms防抖

### 筛选用户
- **全部**：显示所有用户
- **活跃**：只显示正常状态用户
- **禁用**：只显示被禁用的用户

### 用户状态管理
- **启用用户**：恢复用户正常使用权限
- **禁用用户**：限制用户使用功能
- 点击对应按钮即可切换状态

### 用户信息说明
- **积分**：用户当前可用积分数
- **作品**：用户生成的作品总数
- **注册时间**：用户首次注册时间

---

## 📊 数据统计

### 实时统计卡片
管理中心提供6个核心统计指标：

| 指标 | 说明 |
|------|------|
| 👥 总用户数 | 平台注册用户总数 |
| 🟢 活跃用户 | 状态正常的用户数 |
| 🎨 总作品数 | 平台生成的作品总数 |
| 📈 今日作品 | 今天新增的作品数 |
| 💰 总积分 | 所有用户积分总和 |
| 🆕 今日积分 | 今天新增的积分数 |

### 数据导出功能
管理中心支持导出3类数据：

#### 导出用户数据
1. 点击"导出用户"按钮
2. 系统将导出最近1000个用户记录
3. 数据自动复制到剪贴板
4. 包含用户完整信息和格式化时间

#### 导出作品数据
1. 点击"导出作品"按钮
2. 导出最近1000个作品记录
3. 包含作品详情、状态、参数等信息

#### 导出订单数据
1. 点击"导出订单"按钮
2. 导出最近1000个订单记录
3. 包含支付信息、积分变化等

### 导出数据格式
- 格式：JSON
- 时间字段：自动格式化为 `YYYY-MM-DD HH:mm`
- 限制：每次最多导出1000条记录
- 使用：数据复制到剪贴板，可粘贴到文本编辑器查看

---

## 🔧 操作技巧

### 页面导航
- 顶部标签栏快速切换功能模块
- 支持下拉刷新数据
- 自动检测管理员权限

### 数据加载
- 首次进入自动加载数据
- 切换标签页自动刷新
- 操作完成后自动更新列表

### 表单验证
- 所有字段都有字符数限制
- 实时显示已输入字符数
- 必填字段验证
- 格式检查（如API地址、分类等）

### 权限控制
- 所有管理功能都需要管理员权限
- 自动检测权限状态
- 权限不足自动跳转首页

---

## ⚠️ 注意事项

### 安全须知
1. **管理员权限**：确保只有可信用户拥有管理员权限
2. **API密钥**：妥善保管AI模型的API密钥，避免泄露
3. **数据备份**：定期导出重要数据进行备份
4. **操作审慎**：删除操作不可恢复，操作前请确认

### 性能考虑
1. **数据限制**：用户列表限制显示100个，导出限制1000条
2. **搜索优化**：用户搜索有500ms防抖，避免频繁请求
3. **批量操作**：避免同时进行大量删除操作

### 常见问题

#### Q: 为什么看不到管理中心入口？
A: 请确保您的账户具有管理员权限，可以通过隐藏入口（连续点击头像15次）尝试访问。

#### Q: 添加AI模型后为什么不生效？
A: 请检查：
- 模型状态是否为"启用"
- API地址和密钥是否正确
- 权重和优先级设置是否合理

#### Q: 用户列表为空怎么办？
A: 可能原因：
- 数据库中暂无用户数据
- 管理员权限检查失败
- 网络连接问题

#### Q: 导出的数据在哪里？
A: 导出的数据会自动复制到剪贴板，您可以粘贴到任意文本编辑器中查看和保存。

#### Q: 提示词模板的变量如何使用？
A: 在模板中使用 `{变量名}` 格式，变量列表中用逗号分隔，系统会自动替换变量值。

---

## 🚀 部署说明

### 云函数部署
管理中心功能需要以下云函数支持：
- `api` - 用户管理和统计功能
- `aimodels` - AI模型管理和权限验证
- `prompt` - 提示词管理
- `scene` - 场景管理

### 数据库权限
确保云函数有以下数据库集合的读写权限：
- `users` - 用户信息
- `works` - 作品数据
- `aimodels` - AI模型配置
- `prompt_templates` - 提示词模板
- `scenes` - 摄影场景
- `orders` - 订单记录

---

## 📞 技术支持

如遇到技术问题，请检查：
1. 云函数是否正确部署
2. 数据库权限是否配置正确
3. 管理员权限是否生效
4. 网络连接是否正常

管理中心为AI摄影师小程序提供了完整的后台管理功能，帮助管理员高效地管理平台资源和用户。合理使用这些功能，可以大大提升平台的运营效率和用户体验。